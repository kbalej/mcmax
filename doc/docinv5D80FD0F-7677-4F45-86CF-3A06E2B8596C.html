<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>McMax</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular-resource.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular-route.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular-sanitize.min.js"></script>
<style>
.item11 {
grid-area: header1;
margin-left: 80px;
}
.item12 {
grid-area: header2;
text-align: center;
}
.item13 {
grid-area: header3;
text-align: center;
}
.item21 {
grid-area: header21;
margin-left: 80px;
}
.item22 {
grid-area: header22;
text-align: center;
}
.item23 {
grid-area: header23;
text-align: center;
}
.itemI {
text-align: right;
grid-area: item;
margin-left: 80px;
margin-right: 80px;
}
.grid-container {
display: grid;
grid-template-areas: 'header1 header1 header2 header2 header3 header3' 'header21 header21 header22 header22 header23 header23' 'item item item item item item';
grid-gap: 1px;
padding: 0px;
}
.grid-container > div {
padding: 20px 0;
font-size: 14px;
}
table {
border-collapse: collapse;
width: 100%;
}
th, td {
padding: 8px;
text-align: right;
overflow: display;
white-space: wrap;
}
tr:nth-child(even) {
background-color: #f2f2f2
}
thead {
background-color: #4CAF50;
color: white;
}
tfoot {
background-color: grey;
color: white;
}
.pre {
    white-space: pre-wrap;
}
.header {
    font-size: 24px;
}
/*#id1 {}*/
</style>
</head>
<body>
<div id='MAIN' ng-app='docApp' ng-controller='docCtrl'>
<div class='grid-container'>
<div class='item11 pre'>
{{dm.r.brands.logoComment}}
</div>
<div class='item12'>
</div>
<div class='item13'>
<img src='{{dm.r.brands.logoPath}}'>
</div>'
<div class='item21'>
<br />
<br />
<br />
FACTURE: {{dm.m.iNumber}}<br />
date: <span ng-bind="dm.m.date | date:'dd.MM.yyyy'"></span><br />
délai: <span>{{dm.m.date | kDateAddFromDateISO8601 : 10 | date:'dd.MM.yyyy'}}</span> 
</div>
<div class='item22'>
<br />
<br />
<br />
<span class='header'>{{dm.m.name}}</span>
</div>
<div class='item23'>
<span class='header'>{{dm.r.cust.ADL1}}</span><br />
<span class='header'>{{dm.r.cust.ADL2}}</span><br />
<span class='header'>{{dm.r.cust.ADL3}}</span><br />
<span class='header'>{{dm.r.cust.ADL4}}</span><br />
<span class='header'>{{dm.r.cust.ADL5}}</span><br />
</div>
<div class='itemI'>
<table>
<thead>
<tr>
<th></th><th></th><th></th><th>qté/heures</th><th>prix unitaire</th><th>CHF</th>
</tr>
</thead>
<tbody>
<tr ng-repeat='body in dm.i'>
<td><span ng-bind="dm.m.date | date:'dd.MM.yyyy'"></span><br /></td><td>{{body.service}}</td><td><span class='pre'>{{body.description}}</span></td><td>{{body.hoursWorked}}</td><td>{{body.hourlyRate}}</td><td ng-bind='body.cost | number : 2'></td>
</tr>
</tbody>
<tfoot>
<tr>
<td></td><td></td><td></td><td></td><td class='header'>TOTAL</td><td class='header' ng-bind='dm.if.cost | number : 2'></td>
</tr>
</tfoot>
</table>
<hr>
<center>created by McMax.biz, Val de Bagnes</center>

<hr><hr><hr>
<div ng-show='d_m.g.ldryDetails1.length()>0'>
Annex: ldryDetails1
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th>quté</th>
<th>p.unitaire</th>
<th>prix</th>
</tr>
</thead>
<tbody>
<tr ng-repeat='body in dm.g[v]'>
<td>{{body.date}}</td>
<td>{{body.ldryName}}</td>
<td>{{body.description}}</td>
<td>{{body.quantity}}</td>
<td>{{body.unitCost}}</td>
<td>{{body.cost}}</td>
</tr>
</table>
</div>

</div>
</div>
</div>
<script>
var docApp = angular.module('docApp', ['ngSanitize']);
docApp.filter('kDateAddFromDateISO8601', [function() { 
  return function(isoDateString, days) { 
    var parts; 
    var isoTime; 
    var date; 
    isoDateString = isoDateString || ""; 
    days = days || 0; 
    parts = isoDateString.match(/\d+/g); 
    isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]); 
    date = new Date(isoTime); 
    if (days) { 
      date.setDate(date.getDate() + days); 
    } 
    return date; 
    }; 
}]);
docApp.controller('docCtrl', function ($scope, $timeout, $http, $sce) {
$scope.dm = {"m":{"date":"2019-02-01T23:00:00.000Z","name":"Nettoyage","brandsID":"3                       ","brandsName":"Nadine's Verbier Services","custID":"154                     ","custName":"Adams Margaret","iNumber":"2602"},"r":{"brands":{"name":"Nadine's Verbier Services","logoPath":"https://verbierservices.net/images/logoVS.jpg","logoCapture":"vs","logoComment":"Nadine  Balej\r\nChalet Au Fil de l'Eau\r\nCH-1947 Versegères\r\n\r\nIBAN: CH10 0483 5018 1526 4000 0\r\nSWIFT CRESCHZZ19D \r\n\r\nnadine@verbierservices.net\r\nwww.verbierservices.net\r\nmobile: +41 79 242 9067\r\ntel: +41 27 778 1093","logoWidth":50,"logoHeight":"auto"},"cust":{"name":"Adams Margaret","prixHeure":120,"minHW":0.25,"maxHW":2.75,"avHW":1.5,"DateLastSale":"2007-07-16T00:00:00","TotalSalesInvoiced":180}},"g":{"ldryDetails1":[{}]},"i":[{"date":"2019-02-01T23:00:00.000Z","service":"Nettoyage","hoursWorked":"1","cost_ST":"0","brandsID":"3                       ","custID":"154                     ","custName":"Adams Margaret","hourlyRate":120,"cost":"120","cost_NET":"120","brandsName":"Nadine's Verbier Services"}],"if":{"cost":"0120"}};
$scope.getdate = function (p) {
    var h2 = '' + p;
    //var h = h2.substring(0, 10).split('-');
    //var h1 = '' + new Date(h[0],h[1] - 1,h[2] );
    var h3 = h2.substring(0,10);
    return h3;
};
});
</script>
</body>
</html>